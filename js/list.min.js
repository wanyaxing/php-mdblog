ready(function(){function t(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}function e(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function o(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function n(e,o){var n=e;do{if(t(n,o))break;if(!n.parentNode)return null;n=n.parentNode}while(n);return n}function i(t,e){for(var o=0;o<t.length;o++)e(o,t[o])}function l(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop+document.documentElement.scrollTop,left:e.left+document.body.scrollLeft+document.documentElement.scrollLeft}}function r(t){var e=0;t.style.opacity=0,t.style.filter="",t.style.display="block";var o=+new Date,n=function(){e+=(new Date-o)/400,t.style.opacity=e,t.style.filter="alpha(opacity="+100*e|"0)",o=+new Date,e<1&&(window.requestAnimationFrame&&requestAnimationFrame(n)||setTimeout(n,16))};n()}function a(t,e){var o=new XMLHttpRequest;o.open("GET",t,!0),o.onreadystatechange=function(){4===this.readyState&&this.status>=200&&this.status<400&&e(this.responseText)},o.send(),o=null}function s(o,n){if(t(o,"loading"))return!1;e(o,"loading"),o.innerHTML="加载中...";var i=o.getAttribute("href");return a(i+(i.indexOf("?")>0?"&":"?")+"is_ajax=1",function(t){o.style.display="none","undefined"!=typeof _hmt&&_hmt.push(["_trackPageview",i]),o.parentNode.removeChild(o),document.getElementById("blog_list").insertAdjacentHTML("beforeend",t)}),n.preventDefault(),n.stopPropagation(),!1}function d(s,d){var c=n(s,"item_bg"),u=n(c,"item_li"),f=c.querySelector(".item_body"),y=c.querySelector(".content");if(t(c,"item_bg_fixed"))return!1;c.getAttribute("id")||c.setAttribute("id","item_"+(new Date).getTime());var h={id:c.getAttribute("id"),url:c.querySelector(".name").getAttribute("href"),title:c.querySelector(".name").textContent||c.querySelector(".name").innerText,isDetail:1};d&&(window.history.pushState(h,h.title,h.url),document.title=h.title),t(y,"content_load")||a(h.url+(h.url.indexOf("?")>0?"&":"?")+"is_ajax=1",function(t){y.innerHTML=t,e(y,"content_load"),i(y.querySelectorAll("pre code"),function(t,e){hljs.highlightBlock(e)})});var g=l(c);g.top=g.top-(document.body.scrollTop+document.documentElement.scrollTop),m=g,p=document.scrollingElement.scrollTop;var w=document.body.offsetWidth;e(document.body,"body-prevent-class"),document.body.style.top=-p+"px",document.body.style.width=w+"px",e(c,"item_bg_fixed"),e(c,"item_showing"),f.style.top=g.top+"px",f.style.left=g.left+"px",f.style.width=u.offsetWidth+"px",f.style.height=u.offsetHeight+"px",c.querySelector(".description").style.display="none",r(c.querySelector(".content")),anime.remove(f),anime({targets:f,scale:1,top:0,left:l(document.getElementById("blog_list")).left,width:document.getElementById("blog_list").offsetWidth+"px",height:[{value:"256px",duration:150},{value:"1000px",duration:350},{value:"100pv",duration:300}],duration:800,complete:function(t){f.style.height="auto",o(c,"item_showing"),"undefined"!=typeof _hmt&&_hmt.push(["_trackPageview",window.location.href])}})}function c(){var t=document.querySelector(".item_bg_fixed");if(!t)return!1;var i=n(t,"item_li"),l=t.querySelector(".item_body");t.querySelector(".content");e(t,"item_hiding"),t.querySelector(".content").style.display="none",r(t.querySelector(".description"));var a=m;anime.remove(l),anime({targets:l,scale:1,top:a.top+"px",left:a.left+"px",width:i.offsetWidth+"px",height:i.offsetHeight+"px",duration:500,complete:function(e){o(t,"item_bg_fixed"),o(t,"item_hiding"),l.style.top="",l.style.left="",l.style.width="",l.style.height="",o(document.body,"body-prevent-class"),document.body.style.top="",document.body.style.width="",document.scrollingElement.scrollTop=p,"undefined"!=typeof _hmt&&_hmt.push(["_trackPageview",window.location.href])}})}var u=(window.history&&window.history.pushState&&window.history.replaceState&&navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),window.location.href,document.title,{id:(new Date).getTime(),url:window.location.href,title:document.title,isDetail:0});window.history.replaceState(u,u.title,u.url),window.onpopstate=function(t){if(t.state&&t.state.id){if(t.state.isDetail){var e=document.getElementById(""+t.state.id);e?d(e,0):window.history.go(0)}else c();t.state.title&&(document.title=t.state.title)}return!1};var m,p;return document.addEventListener("click",function(e){var o=e.target;return t(o,"btn_loadmore")?s(o,e):t(o,"name")||n(o,"description")?(d(o,1),e.preventDefault(),e.stopPropagation(),!1):t(o,"btn_close")?(window.history.go(-1),e.preventDefault(),e.stopPropagation(),!1):void 0},!1),!1});